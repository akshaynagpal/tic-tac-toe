<!DOCTYPE html>
<html>
<head>
<style>
.body{
  margin: 0 auto;
}
</style>
</head>
<body >
<script type="text/javascript">
 
</script>

<canvas id="main-canvas" height="600" width="600" style="border: 1px solid #000000;">
Your browser does not support canvas.
</canvas>
<script>
      // RULES
      // human is X
      // comp is O 
      // cross is 'X'
      // O is 0
      // blank is B

      //init

      var computer_starts = false;
      var mouseX = 0;
      var mouseY = 0;
      var box=0;
      var turn = 1;
      var disabled = new Array();  // array to add already used boxes
      var c = document.getElementById("main-canvas");
      var ctx = c.getContext("2d");
      var gameArray = new Array("B","B","B","B","B","B","B","B","B");

      // END init

      //  drawing grid
      ctx.moveTo(200,0);
      ctx.lineTo(200,600);
      ctx.moveTo(400,0);
      ctx.lineTo(400,600);
      ctx.moveTo(0,200);
      ctx.lineTo(600,200);
      ctx.moveTo(0,400);
      ctx.lineTo(600,400);
      ctx.stroke();
      // end drawing grid

      //adding mouse click event listener
      c.addEventListener('mousedown',getBox,false);

      // function checkFutureWin(side){
      //   if(side=="human"){

      //   }

      // }
      function checkWin(side){
        //alert("inside checkwin");
        if(side=="human"){

          if(
            (gameArray[0]==gameArray[1]&&gameArray[1]==gameArray[2]&&gameArray[2]=="X")||
            (gameArray[3]==gameArray[4]&&gameArray[4]==gameArray[5]&&gameArray[5]=="X")||
            (gameArray[6]==gameArray[7]&&gameArray[7]==gameArray[8]&&gameArray[8]=="X")||
            (gameArray[0]==gameArray[3]&&gameArray[3]==gameArray[6]&&gameArray[6]=="X")||
            (gameArray[1]==gameArray[4]&&gameArray[4]==gameArray[7]&&gameArray[7]=="X")||
            (gameArray[2]==gameArray[5]&&gameArray[5]==gameArray[8]&&gameArray[8]=="X")||
            (gameArray[0]==gameArray[4]&&gameArray[4]==gameArray[8]&&gameArray[8]=="X")||
            (gameArray[2]==gameArray[4]&&gameArray[4]==gameArray[6]&&gameArray[6]=="X"))
          {
            //alert("You Win!");
            window.location.replace("win.html");
          }
        }  
        else{

          if(
            (gameArray[0]==gameArray[1]&&gameArray[1]==gameArray[2]&&gameArray[2]=="O")||
            (gameArray[3]==gameArray[4]&&gameArray[4]==gameArray[5]&&gameArray[5]=="O")||
            (gameArray[6]==gameArray[7]&&gameArray[7]==gameArray[8]&&gameArray[8]=="O")||
            (gameArray[0]==gameArray[3]&&gameArray[3]==gameArray[6]&&gameArray[6]=="O")||
            (gameArray[1]==gameArray[4]&&gameArray[4]==gameArray[7]&&gameArray[7]=="O")||
            (gameArray[2]==gameArray[5]&&gameArray[5]==gameArray[8]&&gameArray[8]=="O")||
            (gameArray[0]==gameArray[4]&&gameArray[4]==gameArray[8]&&gameArray[8]=="O")||
            (gameArray[2]==gameArray[4]&&gameArray[4]==gameArray[6]&&gameArray[6]=="O"))
          {
            //alert("You lose! Hahahaha!! B-)");
            window.location.replace("lose.html");

          }

        }
      }

      function drawCross(box){

        if(box==0){
          ctx.moveTo(0,0);
          ctx.lineTo(200,200);
          ctx.moveTo(200,0);
          ctx.lineTo(0,200);
          ctx.stroke();
        }
        else if (box==1) {
          ctx.moveTo(200,0);
          ctx.lineTo(400,200);
          ctx.moveTo(400,0);
          ctx.lineTo(200,200);
          ctx.stroke();
        }
        else if (box==2) {
          ctx.moveTo(400,0);
          ctx.lineTo(600,200);
          ctx.moveTo(600,0);
          ctx.lineTo(400,200);
          ctx.stroke();
        }
        else if (box==3) {
          ctx.moveTo(0,200);
          ctx.lineTo(200,400);
          ctx.moveTo(200,200);
          ctx.lineTo(0,400);
          ctx.stroke();
        }
        else if (box==4) {
          ctx.moveTo(200,200);
          ctx.lineTo(400,400);
          ctx.moveTo(400,200);
          ctx.lineTo(200,400);
          ctx.stroke();
        }
        else if (box==5) {
          ctx.moveTo(400,200);
          ctx.lineTo(600,400);
          ctx.moveTo(600,200);
          ctx.lineTo(400,400);
          ctx.stroke();
        }
        else if (box==6) {
          ctx.moveTo(0,400);
          ctx.lineTo(200,600);
          ctx.moveTo(200,400);
          ctx.lineTo(0,600);
          ctx.stroke();
        }
        else if (box==7) {
          ctx.moveTo(200,400);
          ctx.lineTo(400,600);
          ctx.moveTo(400,400);
          ctx.lineTo(200,600);
          ctx.stroke();
        }
        else if (box==8) {
          ctx.moveTo(400,400);
          ctx.lineTo(600,600);
          ctx.moveTo(600,400);
          ctx.lineTo(400,600);
          ctx.stroke();
        }
        gameArray[box] = "X";
        console.log(gameArray);
        //checkWin("human");
      }



      function drawCircle(box){
        if(box==0){
          ctx.beginPath();
          ctx.arc(100,100,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==1) {
          ctx.beginPath();
          ctx.arc(300,100,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==2) {
          ctx.beginPath();
          ctx.arc(500,100,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==3) {
          ctx.beginPath();
          ctx.arc(100,300,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==4) {
          ctx.beginPath();
          ctx.arc(300,300,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==5) {
          ctx.beginPath();
          ctx.arc(500,300,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==6) {
          ctx.beginPath();
          ctx.arc(100,500,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==7) {
          ctx.beginPath();
          ctx.arc(300,500,80,0,2*Math.PI);
          ctx.stroke();
        }
        else if (box==8) {
          ctx.beginPath();
          ctx.arc(500,500,80,0,2*Math.PI);
          ctx.stroke();
        }
        gameArray[box] = "O";
        console.log(gameArray);
        checkWin("machine");
      }

      function getBox(event){
        var mouseX = event.x - c.offsetLeft ;
        var mouseY = event.y - c.offsetTop ;
        //first column
        if(mouseX<200){
          if(mouseY<200){box = 0;}
          else if (mouseY<400) {box = 3;}
          else{box = 6;}
        }
        //second column
        else if (mouseX<400) {
          if(mouseY<200){box = 1;}
          else if (mouseY<400) {box = 4;}
          else{box = 7;}
        }
        //third column
        else{
          if(mouseY<200){box = 2;}
          else if (mouseY<400) {box = 5;}
          else{box = 8;}
        }
        //prevent redrawing
        if(gameArray[box]=="B"){
          drawCross(box);
          checkWin("human");
          if(gameArray[box+1]=="B"){
            drawCircle(box+1);  
          } 
        }
      }




      

      if(confirm("Computer starts the game? \n OK = Yes, Computer \n Cancel = No, Human")){
        drawCircle(4);

      }
      
</script>
</body>


</html>
